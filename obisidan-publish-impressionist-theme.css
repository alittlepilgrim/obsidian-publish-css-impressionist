/*
 * Author: A Little Pilgrim
 * License: MIT
 * Last Updated: 2025-07-27
 *
 * Description:
 * A clean, typewriter-inspired Obsidian theme optimized for readability and minimal visual noise.
 * Originally based on the WordPress Impressionist theme and customized for a personal writing environment with a typewritter feel.
 */
----------------------------------- */

/* +++ TOC
|_ FONT FACES
|_ COLOR VARIABLES
|_ LIGHT MODE
|_ DARK MODE (FORCED LIGHT)
|_ TYPOGRAPHY & FONTS
|_ MARKDOWN FORMATTING
|_ HIGHLIGHT ACTIVE LINE
|_ SIDEBAR NOTES
|_ UI ELEMENTS
|_ GOOGLE FORM MOBILE ADJUST
|_ STYLE SETTINGS
|_ IMAGE ON TEXT
*/

/* +++ FONT FACES */
@import url('https://fonts.googleapis.com/css2?family=Beth+Ellen&family=Cardo:ital,wght@0,400;0,700;1,400&display=swap');

/* +++ COLOR VARIABLES */
body {
  /* New Color Palette */
  --color-background-light: #ECE4DA;
  --color-background-secondary-light: #F6F3EC;
  --color-text-light: #36302A;
  --color-text-muted-light: #574C3F;
  --color-border-light: #B9A590;
  --color-hyperlink-light: #F6EAED;

  /* Font Variables */
  --font-main: 'Cardo', 'Times New Roman', serif;
  --font-headings: 'Beth Ellen', cursive;
}

/* +++ LIGHT MODE */
.theme-light {
  --background-primary: var(--color-background-light);
  --background-primary-alt: var(--color-background-secondary-light);
  --background-secondary: var(--color-background-secondary-light);
  --background-secondary-alt: var(--color-background-secondary-light);
  --background-transparent: hsla(0, 0%, 96%, 0);
  --background-translucent: rgba(255, 255, 255, 0.85);
  --background-modifier-border: var(--color-border-light);
  --background-modifier-border-hover: hsl(from var(--color-border-light) h s calc(l - 6%));
  --background-modifier-border-focus: hsl(from var(--color-border-light) h s calc(l - 12%));
  --background-modifier-form-field: hsl(from var(--color-background-light) h s calc(l + 2%));
  --background-modifier-form-field-highlighted: hsl(from var(--color-background-light) h s calc(l + 4%));

  --color-accent: var(--color-text-muted-light);
  --background-modifier-accent: var(--color-hyperlink-light);
  --vim-cursor: hsla(from var(--color-text-muted-light) h s l / 0.8);
  --text-accent: var(--color-text-muted-light);
  --text-accent-hover: var(--color-text-light);
  --text-normal: var(--color-text-light);
  --text-muted: var(--color-text-muted-light);
  --text-faint: var(--color-border-light);

  --text-highlight-bg: var(--color-hyperlink-light);
  --text-highlight-bg-active: rgba(246, 234, 237, 0.7);
  --text-selection: rgba(204, 230, 255, 0.99);
  --text-on-accent: var(--color-text-light);

  --interactive-normal: #f2f3f5;
  --interactive-hover: #e9e9e9;
  --interactive-accent: var(--color-hyperlink-light);
  --interactive-accent-hover: var(--color-text-muted-light);
  --interactive-accent-rgb: 87, 76, 63;
  --interactive-success: #197300;

  --scrollbar-active-thumb-bg: rgba(0, 0, 0, 0.2);
  --scrollbar-bg: rgba(0, 0, 0, 0.05);
  --scrollbar-thumb-bg: rgba(0, 0, 0, 0.1);
  --highlight-mix-blend-mode: darken;

  --icon-color: var(--text-muted);
  --icon-hex: 000;

  --graph-line-color: #c0c9ce;

  --code-background: #eee8d5;
}

/* Specific rule for opened/visited hyperlinks in light mode */

.theme-light .internal-link:visited,
.theme-light .internal-link.is-unresolved {
  color: var(--color-text-muted-light);
  text-shadow: none;
}

/* Ensure all internal links in light mode use the same readable brown color */
.theme-light .internal-link {
  color: var(--color-text-muted-light);
  text-shadow: none;
}


/* +++ DARK MODE (FORCED LIGHT) */
/* The dark mode variables are set to the light mode colors to force a light theme appearance. */
.theme-dark {
  --background-primary: var(--color-background-light);
  --background-primary-alt: var(--color-background-secondary-light);
  --background-secondary: var(--color-background-secondary-light);
  --background-secondary-alt: var(--color-background-secondary-light);
  --background-transparent: hsla(0, 0%, 96%, 0);
  --background-translucent: rgba(255, 255, 255, 0.85);
  --background-modifier-border: var(--color-border-light);
  --background-modifier-border-hover: hsl(from var(--color-border-light) h s calc(l - 6%));
  --background-modifier-border-focus: hsl(from var(--color-border-light) h s calc(l - 12%));
  --background-modifier-form-field: hsl(from var(--color-background-light) h s calc(l + 2%));
  --background-modifier-form-field-highlighted: hsl(from var(--color-background-light) h s calc(l + 4%));

  --color-accent: var(--color-text-muted-light);
  --background-modifier-accent: var(--color-hyperlink-light);
  --vim-cursor: hsla(from var(--color-text-muted-light) h s l / 0.8);
  --text-accent: var(--color-text-muted-light);
  --text-accent-hover: var(--color-text-light);
  --text-normal: var(--color-text-light);
  --text-muted: var(--color-text-muted-light);
  --text-faint: var(--color-border-light);

  --text-highlight-bg: var(--color-hyperlink-light);
  --text-highlight-bg-active: rgba(246, 234, 237, 0.7);
  --text-selection: rgba(204, 230, 255, 0.99);
  --text-on-accent: var(--color-text-light);

  --interactive-normal: #f2f3f5;
  --interactive-hover: #e9e9e9;
  --interactive-accent: var(--color-hyperlink-light);
  --interactive-accent-hover: var(--color-text-muted-light);
  --interactive-accent-rgb: 87, 76, 63;
  --interactive-success: #197300;

  --scrollbar-active-thumb-bg: rgba(0, 0, 0, 0.2);
  --scrollbar-bg: rgba(0, 0, 0, 0.05);
  --scrollbar-thumb-bg: rgba(0, 0, 0, 0.1);
  --highlight-mix-blend-mode: darken;

  --icon-color: var(--text-muted);
  --icon-hex: 000;

  --graph-line-color: #c0c9ce;

  --code-background: #eee8d5;
}

/* +++ TYPOGRAPHY & FONTS */
body {
  --font-text-theme: var(--font-main);
  --font-interface-theme: var(--font-text-theme);
  --font-editor-theme: var(--font-main); /* Using Cardo for editor as well */
  --font-editor: var(--font-text-theme), var(--font-text-override), var(--font-editor-theme);
  --font-monospace-default: "JetBrains Mono", monospace;
  --font-monospace: var(--font-monospace-override), var(--font-monospace-theme), var(--font-monospace-default);
  font-variant-emoji: unicode !important; /* emoji will override numbers and special characters */
  --metadata-input-font-size: var(--font-small);

  --font-normal-size: 1em;
  --font-small: 0.813em;
  --font-smaller: 0.688em;
  --font-smallest: 0.625em;

  --code-size: var(--font-small);
  --code-normal: var(--blue);

  --h1: 1.8em;
  --h2: 1.55em;
  --h3: 1.35em;
  --h4: 1.15em;
  --h5: 1em;
  --h6: 0.95em;

  --h1-weight: 600;
  --h2-weight: 600;
  --h3-weight: 550;
  --h4-weight: 550;
  --h5-weight: 550;
  --h6-weight: 550;

  --h1-color: var(--text-normal);
  --h2-color: var(--text-normal);
  --h3-color: var(--text-normal);
  --h4-color: var(--text-normal);
  --h5-color: var(--text-normal);
  --h6-color: var(--text-normal);

  --normal-weight: 500;
  --bold-weight: 620;
  --line-width: 40rem; /* Maximum characters per line */
  --line-height: 1.5;
  --max-width: 88%; /* Amount of padding around the text, use 90% for narrower padding */
  --icon-muted: 0.5;
  --border-width: 1px;
  --border-width-alt: 1px;

  --radius-s: 2px;
  --radius-m: 5px;
  --radius-l: 10px;

  --input-height: 32px;
  --header-height: 40px;

  --yellow: #e5b567;
  --green: #b4d273;
  --orange: #e87d3e;
  --purple: #9e86c8;
  --pink: #b05279;
  --blue: #6c99bb;

  line-height: var(--line-height);
}

/* Apply heading font */
.markdown-preview-view h1, .cm-s-obsidian .cm-header-1,
.markdown-preview-view h2, .cm-s-obsidian .cm-header-2,
.markdown-preview-view h3, .cm-s-obsidian .cm-header-3,
.markdown-preview-view h4, .cm-s-obsidian .cm-header-4,
.markdown-preview-view h5, .cm-s-obsidian .cm-header-5,
.markdown-preview-view h6, .cm-s-obsidian .cm-header-6 {
  font-family: var(--font-headings);
}


/* source mode */
.markdown-source-view {
  font-family: var(--font-text-theme);
}

/* live preview */
.markdown-source-view.is-live-preview {
  font-family: var(--font-editor-theme);
}

/* reading mode */
.markdown-preview-view {
  font-family: var(--font-text-theme);
}

/* +++ MARKDOWN FORMATTING */
/* fade formatting tags out */
.shrink-formatting .CodeMirror-line span.cm-formatting:not(.cm-s-obsidian span.cm-link, .cm-s-obsidian span.cm-hmd-internal-link, .cm-s-obsidian span.cm-url, .cm-s-obsidian span.cm-attribute, .cm-s-obsidian span.cm-quote, span.cm-hashtag.cm-hashtag-begin, .cm-s-obsidian span.cm-formatting-list), /* legacy editor */
.shrink-formatting .markdown-source-view.mod-cm6 .cm-line span.cm-formatting:not(.cm-s-obsidian span.cm-link, .cm-s-obsidian span.cm-hmd-internal-link, .cm-s-obsidian span.cm-url, .cm-s-obsidian span.cm-attribute, .cm-s-obsidian span.cm-quote, span.cm-hashtag.cm-hashtag-begin, .cm-s-obsidian span.cm-formatting-list) /* CM6 editor */ {
  color: var(--text-faint);
  font-size: var(--font-smaller) !important;
}

/* increase blockquote height */
.markdown-source-view.mod-cm6.is-live-preview .HyperMD-quote {
  padding-top: 7px;
  padding-bottom: 7px;
}

/* +++ HIGHLIGHT ACTIVE LINE */
.active-line-highlight .markdown-source-view .CodeMirror-activeline,
.active-line-highlight .markdown-source-view.mod-cm6 .cm-active.cm-line {
  background: var(--background-secondary);
  border-radius: 8px;
}

/* +++ SIDEBAR NOTES */
/* make sidebar notes' background var(--background-primary) */
.mod-right-split .markdown-preview-view,
.mod-left-split .markdown-preview-view,
.mod-right-split .markdown-source-view.mod-cm6 .cm-scroller,
.mod-left-split .markdown-source-view.mod-cm6 .cm-scroller {
  background-color: var(--background-primary);
}

/* +++ UI ELEMENTS */

/* make inline title equal to H1 */
.inline-title {
  font-weight: var(--h1-weight);
}

/* increase space between editor and metadata â€“ credit to Minimal */
.metadata-container {
  --input-height: 2rem;
}
.markdown-source-view .metadata-container {
  transform: translateX(-4px);
}
.is-phone {
  --metadata-label-font-size: var(--font-adaptive-smaller);
  --metadata-input-font-size: var(--font-adaptive-smaller);
}

/* make cursor accent color */
.CodeMirror-cursor {
  background-color: var(--color-accent);
}

/* make Vim cursor transluscent and accent color */
.cm-fat-cursor-mark,
.cm-fat-cursor .CodeMirror-cursor {
  width: inherit;
  background-color: var(--vim-cursor) !important;
}

/* blur background when pop-ups are active
   (credit: Deep Work) */
body .modal {
  border-radius: 18px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
}
body .modal .prompt-results {
  padding: calc((1rem * 2) * 1);
}
body .modal-bg {
  /* backdrop-filter: blur(8px); */ /* causes slowdowns */
  background-color: rgb(8, 8, 8);
}

/* make workspace frameless */
.workspace-tab-header-container,
.workspace-ribbon.mod-left:before,
.mod-macos.is-hidden-frameless:not(.is-popout-window)
  .sidebar-toggle-button.mod-right {
  background-color: var(--background-primary);
}

/* remove note-to-note link underline */
:root body {
  --link-decoration: none;
  --link-decoration-hover: none;
}

/* centered tables, simplified */
.markdown-rendered table {
  width: 100%;
}

.markdown-rendered table th {
  padding: calc(1em/3) calc(2em/3);
}

.markdown-rendered table td {
  padding: calc(1em/6) calc(2em/3);
}

.markdown-source-view .cm-content .cm-table-widget .table-wrapper {
  width: 100%;
}

.markdown-source-view .cm-content .cm-table-widget th .table-cell-wrapper {
  padding: calc(1em/3) calc(2em/3);
}

.markdown-source-view .cm-content .cm-table-widget td .table-cell-wrapper {
  padding: calc(1em/6) calc(2em/3);
}

/* h1 and surrounding p margin variables, thanks to FireIsGood#0733 */
:root h1 {
  margin: 0;
}
.markdown-preview-view div:has(> h1) + div > p {
  margin-top: 1em;
}
.markdown-preview-view div:has(+ div > h1) > p {
  margin-bottom: 0.33em;
}

/* FIX: margin-top funkiness present since Obsidian 1.1+ */
.markdown-source-view table {
  margin-top: 0;
}

/* FIX: background color for titlebar buttons on Windows */
div.titlebar-button-container.mod-right {
  background-color: var(--background-primary) !important;
}

/* EDITOR: font-scalable edit-block-button */
/* add header padding for button if last column is right-aligned */
.markdown-source-view table th:last-child[align="right"] {
  padding-right: 2.767527675276753em;
  padding-left: 0.8324108241082411em; /* balances padding-right */
}
/* button attributes */
.markdown-source-view.mod-cm6 .edit-block-button {
  opacity: 1;
  top: 0.3em;
  right: 0.25em;
  align-items: center;
  justify-content: center;
}
.markdown-source-view div.edit-block-button svg {
  width: 1.2em;
  height: 1em;
}

/* DARKEN GRAPH VIEW LINS */
.graph-view.color-line {
  color: var(--graph-line-color);
}

/* FOLD INDICATOR SPACING */
/* prevent overlap with text */

div.cm-fold-indicator {
  margin-right: 0;
}

.markdown-source-view.mod-cm6 .cm-fold-indicator .collapse-indicator {
  padding-right: 4px;
  right: 0;
}


/* +++ GOOGLE FORM MOBILE ADJUST + */

.responsive-gform-container {
  position: relative;
  overflow: hidden;
  padding-top: 80.16%; /* This is the magic number for your form's aspect ratio */
  /* Aspect Ratio Calculation: (original height / original width) * 100% */
  /* (513 / 640) * 100% = 80.15625% */
}

.responsive-gform-container iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border: 0;
}

/* +++ END OF SECTION ++ */


/* +++ STYLE SETTINGS by @mgmeyers */

/* @settings

name: Typewriter
id: obsidian-typewriter
settings:
    -
        id: typewriter-editor
        title: Editor
        type: heading
        level: 2
    -
        id: shrink-formatting
        title: Shrink & fade Markdown formatting symbols
        type: class-toggle
        default: on
    -
        id: active-line-highlight
        title: Highlight the active line
        type: class-toggle
        default: on

*/
/* +++ END OF SECTION ++ */


/* +++ IMAGE ON TEXT +++*/


/* For positioning text on an image */
.image-container {
  position: relative; /* This is the key to positioning child elements */
  display: inline-block; /* Makes the container wrap the image */
}

.image-container .image-text-overlay {
  position: absolute; /* Positions the text relative to the container */
  top: 50%; /* Center vertically */
  left: 50%; /* Center horizontally */
  transform: translate(-50%, -50%); /* Fine-tunes the centering */
  color: white;
  background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black background */
  padding: 10px 15px;
  border-radius: 5px;
  text-align: center;
  font-weight: bold;
  pointer-events: none; /* Allows you to click 'through' the text to the image */
  font-family: "Courier New", Courier, monospace;

}

/* +++ END OF SECTION ++ */
